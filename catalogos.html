<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Dashboard de cat치logos para empresas de pl치sticos">
    <title>Cat치logos de Productos</title>
    
    <!-- Preconexi칩n y precarga de recursos cr칤ticos -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" as="style">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Favicon moderno -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>游닍</text></svg>">

    <style>
        /* === ESTILOS CR칈TICOS (inline) === */
        :root {
            --primary: #4361ee;
            --primary-hover: #3a56d4;
            --light: #f8f9fa;
            --card-bg: #ffffff;
            --text: #2b2d42;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            --border-radius: 12px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--light);
            color: var(--text);
            padding: 0.75rem;
            min-height: 100vh;
        }

        .dashboard-container {
            max-width: 100%;
            margin: 0 auto;
        }

        .catalog-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
            width: 100%;
        }

        .catalog-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 1rem;
            border: 1px solid rgba(0, 0, 0, 0.05);
            min-height: 140px;
            display: flex;
            flex-direction: column;
        }

        /* === ESTILOS NO CR칈TICOS (se cargar치n despu칠s) === */
        .non-critical-styles {
            display: none;
        }
    </style>

    <!-- Carga diferida de estilos no cr칤ticos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>
</head>
<body>
    <div class="dashboard-container">
        <header>
            <div class="header-title">
                <i class="fas fa-boxes"></i>
                <h1>Cat치logos de Productos</h1>
            </div>
            <a href="index.html" class="back-btn">
                <i class="fas fa-arrow-left"></i>
                Volver
            </a>
        </header>

        <div class="search-container">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-input" id="searchInput" placeholder="Buscar cat치logo..." autocorrect="off">
        </div>

        <div class="catalog-grid" id="catalogGrid">
            <!-- Cat치logo 1 -->
            <div class="catalog-card" data-search="stampo internacional plastico">
                <div class="card-header">
                    <h3><i class="fas fa-file-pdf"></i> Stampo Internacional</h3>
                    <span class="card-category"><i class="fas fa-tag"></i> Pl치stico</span>
                </div>
                <button class="catalog-btn" data-pdf-url="catmedia/stampo.pdf">
                    <i class="fas fa-external-link-alt"></i> Abrir
                </button>
            </div>

            <!-- Cat치logo 2 -->
            <div class="catalog-card" data-search="sparta plast productos">
                <div class="card-header">
                    <h3><i class="fas fa-file-pdf"></i> Sparta Plast</h3>
                    <span class="card-category"><i class="fas fa-tag"></i> Pl치stico</span>
                </div>
                <button class="catalog-btn" data-pdf-url="catmedia/sparta.pdf">
                    <i class="fas fa-external-link-alt"></i> Abrir
                </button>
            </div>

            <!-- Cat치logo 3 -->
            <div class="catalog-card" data-search="prini plastico">
                <div class="card-header">
                    <h3><i class="fas fa-box-open"></i> Prini</h3>
                    <span class="card-category"><i class="fas fa-tag"></i> Pl치stico</span>
                </div>
                <button class="catalog-btn" data-web-url="https://www.prini.com.gt">
                    <i class="fas fa-external-link-alt"></i> Ver Web
                </button>
            </div>

            <!-- Cat치logo 4 -->
            <div class="catalog-card" data-search="plastikito alteplast">
                <div class="card-header">
                    <h3><i class="fas fa-boxes"></i> Plastikito</h3>
                    <span class="card-category"><i class="fas fa-tag"></i> Pl치stico</span>
                </div>
                <button class="catalog-btn" data-web-url="https://www.plastikito.com">
                    <i class="fas fa-external-link-alt"></i> Ver Web
                </button>
            </div>

            <div class="no-results hidden" id="noResults">
                <i class="fas fa-search"></i>
                <h3>No hay resultados</h3>
            </div>
        </div>
    </div>

    <!-- Modal PDF -->
    <div class="fullscreen-modal" id="pdfModal">
        <button class="modal-close" id="modalClose" aria-label="Cerrar">&times;</button>
        <div class="pdf-loading" id="pdfLoading">
            <div class="spinner"></div>
        </div>
        <iframe class="modal-content" id="pdfViewer" title="Visor PDF" loading="lazy"></iframe>
    </div>

    <!-- JavaScript optimizado para m칩viles -->
    <script>
        // ===== CORE FUNCTIONALITY =====
        document.addEventListener('DOMContentLoaded', function() {
            // Elementos del DOM
            const pdfModal = document.getElementById('pdfModal');
            const pdfViewer = document.getElementById('pdfViewer');
            const modalClose = document.getElementById('modalClose');
            const searchInput = document.getElementById('searchInput');
            const catalogCards = document.querySelectorAll('.catalog-card');
            
            // Configuraci칩n inicial
            let isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            // ===== FUNCIONES PRINCIPALES =====
            function openFullscreenModal(url) {
                // Optimizaci칩n para m칩viles: usa viewer nativo en iOS
                if (isMobile && /iPhone|iPad/i.test(navigator.userAgent) && url.endsWith('.pdf')) {
                    window.open(url, '_blank');
                    return;
                }
                
                pdfModal.classList.add('active');
                document.body.style.overflow = 'hidden';
                
                // Carga diferida del PDF
                setTimeout(() => {
                    pdfViewer.src = url.startsWith('http') ? url : 
                                  new URL(url, window.location.href).href;
                }, 50);
            }
            
            function closeModal() {
                pdfModal.classList.remove('active');
                document.body.style.overflow = '';
                pdfViewer.src = ''; // Libera memoria
            }
            
            function searchCatalogs() {
                const term = searchInput.value.toLowerCase().trim();
                let hasResults = false;
                
                catalogCards.forEach(card => {
                    const searchData = card.dataset.search.toLowerCase();
                    if (!term || searchData.includes(term)) {
                        card.style.display = 'flex';
                        hasResults = true;
                    } else {
                        card.style.display = 'none';
                    }
                });
                
                document.getElementById('noResults').classList.toggle('hidden', hasResults || !term);
            }
            
            // ===== EVENT LISTENERS OPTIMIZADOS =====
            // Delegaci칩n de eventos para mejor rendimiento
            document.addEventListener('click', function(e) {
                // Bot칩n cerrar modal
                if (e.target.closest('#modalClose')) {
                    closeModal();
                    return;
                }
                
                // Tarjetas clickeables
                const card = e.target.closest('.catalog-card');
                if (card && card.style.display !== 'none') {
                    const btn = card.querySelector('.catalog-btn');
                    if (btn) {
                        const url = btn.dataset.pdfUrl || btn.dataset.webUrl;
                        if (url) openFullscreenModal(url);
                    }
                }
            });
            
            // B칰squeda con debounce para m칩viles
            let searchTimeout;
            searchInput.addEventListener('input', () => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(searchCatalogs, 300);
            });
            
            // Carga diferida de estilos no cr칤ticos
            setTimeout(() => {
                const style = document.createElement('style');
                style.textContent = `
                    /* === ESTILOS NO CR칈TICOS === */
                    header {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        margin-bottom: 1.25rem;
                        flex-wrap: wrap;
                        gap: 0.75rem;
                    }
                    
                    .header-title {
                        display: flex;
                        align-items: center;
                        gap: 0.5rem;
                    }
                    
                    .header-title h1 {
                        font-size: 1.25rem;
                        white-space: nowrap;
                    }
                    
                    .back-btn {
                        background: var(--primary);
                        color: white;
                        border: none;
                        padding: 0.6rem 0.8rem;
                        border-radius: var(--border-radius);
                        display: flex;
                        align-items: center;
                        gap: 0.4rem;
                        font-size: 0.85rem;
                        text-decoration: none;
                    }
                    
                    .search-container {
                        position: relative;
                        margin-bottom: 1rem;
                    }
                    
                    .search-input {
                        width: 100%;
                        padding: 0.7rem 0.7rem 0.7rem 2.2rem;
                        border: 1px solid rgba(0, 0, 0, 0.1);
                        border-radius: var(--border-radius);
                        font-size: 0.9rem;
                    }
                    
                    .search-icon {
                        position: absolute;
                        left: 0.7rem;
                        top: 50%;
                        transform: translateY(-50%);
                        color: #6c757d;
                    }
                    
                    .card-header {
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 0.5rem;
                    }
                    
                    .catalog-card h3 {
                        font-size: 1rem;
                        margin-bottom: 0;
                        display: flex;
                        align-items: center;
                        gap: 0.4rem;
                    }
                    
                    .card-category {
                        background: rgba(67, 97, 238, 0.1);
                        color: var(--primary);
                        padding: 0.2rem 0.5rem;
                        border-radius: 10px;
                        font-size: 0.7rem;
                        font-weight: 600;
                    }
                    
                    .catalog-btn {
                        margin-top: auto;
                        padding: 0.6rem;
                        background: var(--primary);
                        color: white;
                        border: none;
                        border-radius: 8px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        gap: 0.4rem;
                        font-size: 0.85rem;
                    }
                    
                    .fullscreen-modal {
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: white;
                        z-index: 1000;
                        display: none;
                    }
                    
                    .fullscreen-modal.active {
                        display: block;
                    }
                    
                    .modal-close {
                        position: absolute;
                        top: 15px;
                        right: 15px;
                        background: var(--primary);
                        color: white;
                        border: none;
                        width: 40px;
                        height: 40px;
                        border-radius: 50%;
                        font-size: 1.2rem;
                        z-index: 1001;
                    }
                    
                    .modal-content {
                        width: 100%;
                        height: 100%;
                        border: none;
                    }
                    
                    .no-results {
                        text-align: center;
                        padding: 2rem;
                        grid-column: 1 / -1;
                    }
                    
                    .hidden {
                        display: none;
                    }
                    
                    /* Tablet */
                    @media (min-width: 768px) {
                        .catalog-grid {
                            grid-template-columns: repeat(3, 1fr);
                            gap: 1rem;
                        }
                        
                        body {
                            padding: 1rem;
                        }
                    }
                    
                    /* Desktop */
                    @media (min-width: 1024px) {
                        .catalog-grid {
                            grid-template-columns: repeat(4, 1fr);
                        }
                        
                        .dashboard-container {
                            max-width: 1200px;
                        }
                    }
                `;
                document.head.appendChild(style);
            }, 200);
        });
    </script>
</body>
</html>
